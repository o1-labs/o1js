"use strict";(self.webpackChunkdocumentation_site=self.webpackChunkdocumentation_site||[]).push([[1013],{28453:(e,i,r)=>{r.d(i,{R:()=>a,x:()=>t});var n=r(96540);const s={},o=n.createContext(s);function a(e){const i=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(o.Provider,{value:i},e.children)}},87603:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"api-reference/variables/Permissions","title":"Permissions","description":"Defined in291","source":"@site/docs/api-reference/variables/Permissions.mdx","sourceDirName":"api-reference/variables","slug":"/api-reference/variables/Permissions","permalink":"/o1js/api-reference/variables/Permissions","draft":false,"unlisted":false,"editUrl":"https://github.com/docs/api-reference/variables/Permissions.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Keccak","permalink":"/o1js/api-reference/variables/Keccak"},"next":{"title":"Poseidon","permalink":"/o1js/api-reference/variables/Poseidon"}}');var s=r(74848),o=r(28453);const a={},t=void 0,l={},c=[{value:"Type declaration",id:"type-declaration",level:2},{value:"allImpossible()",id:"allimpossible",level:3},{value:"Returns",id:"returns",level:4},{value:"default()",id:"default",level:3},{value:"Returns",id:"returns-1",level:4},{value:"dummy()",id:"dummy",level:3},{value:"Returns",id:"returns-2",level:4},{value:"fromJSON()",id:"fromjson",level:3},{value:"Parameters",id:"parameters",level:4},{value:"permissions",id:"permissions",level:5},{value:"Returns",id:"returns-3",level:4},{value:"fromString()",id:"fromstring",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"permission",id:"permission",level:5},{value:"Returns",id:"returns-4",level:4},{value:"impossible()",id:"impossible",level:3},{value:"Returns",id:"returns-5",level:4},{value:"initial()",id:"initial",level:3},{value:"Returns",id:"returns-6",level:4},{value:"none()",id:"none",level:3},{value:"Returns",id:"returns-7",level:4},{value:"proof()",id:"proof",level:3},{value:"Returns",id:"returns-8",level:4},{value:"proofOrSignature()",id:"prooforsignature",level:3},{value:"Returns",id:"returns-9",level:4},{value:"signature()",id:"signature",level:3},{value:"Returns",id:"returns-10",level:4},{value:"VerificationKey",id:"verificationkey",level:3},{value:"VerificationKey.impossibleDuringCurrentVersion()",id:"verificationkeyimpossibleduringcurrentversion",level:4},{value:"Returns",id:"returns-11",level:5},{value:"VerificationKey.none()",id:"verificationkeynone",level:4},{value:"Returns",id:"returns-12",level:5},{value:"VerificationKey.proofDuringCurrentVersion()",id:"verificationkeyproofduringcurrentversion",level:4},{value:"Returns",id:"returns-13",level:5},{value:"VerificationKey.proofOrSignature()",id:"verificationkeyprooforsignature",level:4},{value:"Returns",id:"returns-14",level:5},{value:"VerificationKey.signature()",id:"verificationkeysignature",level:4},{value:"Returns",id:"returns-15",level:5}];function d(e){const i={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"Permissions: {\n  allImpossible: () => Permissions;\n  default: () => Permissions;\n  dummy: () => Permissions;\n  fromJSON: (permissions: {}) => Permissions;\n  fromString: (permission: AuthRequired) => AuthRequired;\n  impossible: () => AuthRequired;\n  initial: () => Permissions;\n  none: () => AuthRequired;\n  proof: () => AuthRequired;\n  proofOrSignature: () => AuthRequired;\n  signature: () => AuthRequired;\n  VerificationKey: {\n     impossibleDuringCurrentVersion: () => VerificationKeyPermission;\n     none: () => VerificationKeyPermission;\n     proofDuringCurrentVersion: () => VerificationKeyPermission;\n     proofOrSignature: () => VerificationKeyPermission;\n     signature: () => VerificationKeyPermission;\n    };\n};\n"})}),"\n",(0,s.jsxs)(i.p,{children:["Defined in: ",(0,s.jsx)(i.a,{href:"https://github.com/o1-labs/o1js/blob/df1ff77af12d7cbbed4a6167f02815fad4f0dceb/src/lib/mina/v1/account-update.ts#L291",children:"lib/mina/v1/account-update.ts:291"})]}),"\n",(0,s.jsx)(i.h2,{id:"type-declaration",children:"Type declaration"}),"\n",(0,s.jsx)(i.h3,{id:"allimpossible",children:"allImpossible()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"allImpossible: () => Permissions;\n"})}),"\n",(0,s.jsx)(i.h4,{id:"returns",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions",children:(0,s.jsx)(i.code,{children:"Permissions"})})}),"\n",(0,s.jsx)(i.h3,{id:"default",children:"default()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"default: () => Permissions;\n"})}),"\n",(0,s.jsx)(i.p,{children:"Default permissions are:"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions#editstate",children:"Permissions.editState"})," = ",(0,s.jsx)(i.a,{href:"/o1js/api-reference/variables/Permissions#proof",children:"Permission.proof"})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions#send",children:"Permissions.send"})," = ",(0,s.jsx)(i.a,{href:"/o1js/api-reference/variables/Permissions#signature",children:"Permission.signature"})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions#receive",children:"Permissions.receive"})," = ",(0,s.jsx)(i.a,{href:"/o1js/api-reference/variables/Permissions#none",children:"Permission.none"})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions#setdelegate",children:"Permissions.setDelegate"})," = ",(0,s.jsx)(i.a,{href:"/o1js/api-reference/variables/Permissions#signature",children:"Permission.signature"})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions#setpermissions",children:"Permissions.setPermissions"})," = ",(0,s.jsx)(i.a,{href:"/o1js/api-reference/variables/Permissions#signature",children:"Permission.signature"})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions#setverificationkey",children:"Permissions.setVerificationKey"})," = ",(0,s.jsx)(i.a,{href:"/o1js/api-reference/variables/Permissions#signature",children:"Permission.signature"})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions#setzkappuri",children:"Permissions.setZkappUri"})," = ",(0,s.jsx)(i.a,{href:"/o1js/api-reference/variables/Permissions#signature",children:"Permission.signature"})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions#editactionstate",children:"Permissions.editActionState"})," = ",(0,s.jsx)(i.a,{href:"/o1js/api-reference/variables/Permissions#proof",children:"Permission.proof"})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions#settokensymbol",children:"Permissions.setTokenSymbol"})," = ",(0,s.jsx)(i.a,{href:"/o1js/api-reference/variables/Permissions#signature",children:"Permission.signature"})]}),"\n",(0,s.jsx)(i.h4,{id:"returns-1",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions",children:(0,s.jsx)(i.code,{children:"Permissions"})})}),"\n",(0,s.jsx)(i.h3,{id:"dummy",children:"dummy()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"dummy: () => Permissions;\n"})}),"\n",(0,s.jsx)(i.h4,{id:"returns-2",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions",children:(0,s.jsx)(i.code,{children:"Permissions"})})}),"\n",(0,s.jsx)(i.h3,{id:"fromjson",children:"fromJSON()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"fromJSON: (permissions: {}) => Permissions;\n"})}),"\n",(0,s.jsx)(i.h4,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsx)(i.h5,{id:"permissions",children:"permissions"}),"\n",(0,s.jsx)(i.h4,{id:"returns-3",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions",children:(0,s.jsx)(i.code,{children:"Permissions"})})}),"\n",(0,s.jsx)(i.h3,{id:"fromstring",children:"fromString()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"fromString: (permission: AuthRequired) => AuthRequired;\n"})}),"\n",(0,s.jsx)(i.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,s.jsx)(i.h5,{id:"permission",children:"permission"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"AuthRequired"})}),"\n",(0,s.jsx)(i.h4,{id:"returns-4",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"AuthRequired"})}),"\n",(0,s.jsx)(i.h3,{id:"impossible",children:"impossible()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"impossible: () => AuthRequired;\n"})}),"\n",(0,s.jsx)(i.p,{children:"Modification is impossible."}),"\n",(0,s.jsx)(i.h4,{id:"returns-5",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"AuthRequired"})}),"\n",(0,s.jsx)(i.h3,{id:"initial",children:"initial()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"initial: () => Permissions;\n"})}),"\n",(0,s.jsx)(i.h4,{id:"returns-6",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.a,{href:"/o1js/api-reference/interfaces/Permissions",children:(0,s.jsx)(i.code,{children:"Permissions"})})}),"\n",(0,s.jsx)(i.h3,{id:"none",children:"none()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"none: () => AuthRequired;\n"})}),"\n",(0,s.jsx)(i.p,{children:"Modification is always permitted"}),"\n",(0,s.jsx)(i.h4,{id:"returns-7",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"AuthRequired"})}),"\n",(0,s.jsx)(i.h3,{id:"proof",children:"proof()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"proof: () => AuthRequired;\n"})}),"\n",(0,s.jsx)(i.p,{children:"Modification is permitted by zkapp proofs only"}),"\n",(0,s.jsx)(i.h4,{id:"returns-8",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"AuthRequired"})}),"\n",(0,s.jsx)(i.h3,{id:"prooforsignature",children:"proofOrSignature()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"proofOrSignature: () => AuthRequired;\n"})}),"\n",(0,s.jsx)(i.p,{children:"Modification is permitted by zkapp proofs or signatures"}),"\n",(0,s.jsx)(i.h4,{id:"returns-9",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"AuthRequired"})}),"\n",(0,s.jsx)(i.h3,{id:"signature",children:"signature()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"signature: () => AuthRequired;\n"})}),"\n",(0,s.jsx)(i.p,{children:"Modification is permitted by signatures only, using the private key of the zkapp account"}),"\n",(0,s.jsx)(i.h4,{id:"returns-10",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"AuthRequired"})}),"\n",(0,s.jsx)(i.h3,{id:"verificationkey",children:"VerificationKey"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"VerificationKey: {\n  impossibleDuringCurrentVersion: () => VerificationKeyPermission;\n  none: () => VerificationKeyPermission;\n  proofDuringCurrentVersion: () => VerificationKeyPermission;\n  proofOrSignature: () => VerificationKeyPermission;\n  signature: () => VerificationKeyPermission;\n};\n"})}),"\n",(0,s.jsx)(i.p,{children:"Special Verification key permissions."}),"\n",(0,s.jsxs)(i.p,{children:["The difference to normal permissions is that ",(0,s.jsx)(i.code,{children:"Permission.proof"})," and ",(0,s.jsx)(i.code,{children:"Permission.impossible"})," are replaced by less restrictive permissions:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"impossible"})," is replaced by ",(0,s.jsx)(i.code,{children:"impossibleDuringCurrentVersion"})]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"proof"})," is replaced by ",(0,s.jsx)(i.code,{children:"proofDuringCurrentVersion"})]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"The issue is that a future hardfork which changes the proof system could mean that old verification keys can no longer\nbe used to verify proofs in the new proof system, and the zkApp would have to be redeployed to adapt the verification key."}),"\n",(0,s.jsxs)(i.p,{children:["Having either ",(0,s.jsx)(i.code,{children:"impossible"})," or ",(0,s.jsx)(i.code,{children:"proof"})," would mean that these zkApps can't be upgraded after this hypothetical hardfork, and would become unusable."]}),"\n",(0,s.jsxs)(i.p,{children:['Such a future hardfork would manifest as an increment in the "transaction version" of zkApps, which you can check with ',(0,s.jsx)(i.a,{href:"/o1js/api-reference/variables/TransactionVersion#current",children:"()"}),"."]}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"impossibleDuringCurrentVersion"})," and ",(0,s.jsx)(i.code,{children:"proofDuringCurrentVersion"})," have an additional ",(0,s.jsx)(i.code,{children:"txnVersion"})," field.\nThese permissions follow the same semantics of not upgradable, or only upgradable with proofs,\n",(0,s.jsx)(i.em,{children:"as long as"})," the current transaction version is the same as the one on the permission."]}),"\n",(0,s.jsxs)(i.p,{children:["Once the current transaction version is higher than the one on the permission, the permission is treated as ",(0,s.jsx)(i.code,{children:"signature"}),",\nand the zkApp can be redeployed with a signature of the original account owner."]}),"\n",(0,s.jsx)(i.h4,{id:"verificationkeyimpossibleduringcurrentversion",children:"VerificationKey.impossibleDuringCurrentVersion()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"impossibleDuringCurrentVersion: () => VerificationKeyPermission;\n"})}),"\n",(0,s.jsxs)(i.p,{children:["Modification is impossible, as long as the network accepts the current ",(0,s.jsx)(i.a,{href:"/o1js/api-reference/variables/TransactionVersion",children:"TransactionVersion"}),"."]}),"\n",(0,s.jsxs)(i.p,{children:["After a hardfork that increments the transaction version, the permission is treated as ",(0,s.jsx)(i.code,{children:"signature"}),"."]}),"\n",(0,s.jsx)(i.h5,{id:"returns-11",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"VerificationKeyPermission"})}),"\n",(0,s.jsx)(i.h4,{id:"verificationkeynone",children:"VerificationKey.none()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"none: () => VerificationKeyPermission;\n"})}),"\n",(0,s.jsx)(i.p,{children:"Modification is always permitted"}),"\n",(0,s.jsx)(i.h5,{id:"returns-12",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"VerificationKeyPermission"})}),"\n",(0,s.jsx)(i.h4,{id:"verificationkeyproofduringcurrentversion",children:"VerificationKey.proofDuringCurrentVersion()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"proofDuringCurrentVersion: () => VerificationKeyPermission;\n"})}),"\n",(0,s.jsxs)(i.p,{children:["Modification is permitted by zkapp proofs only; as long as the network accepts the current ",(0,s.jsx)(i.a,{href:"/o1js/api-reference/variables/TransactionVersion",children:"TransactionVersion"}),"."]}),"\n",(0,s.jsxs)(i.p,{children:["After a hardfork that increments the transaction version, the permission is treated as ",(0,s.jsx)(i.code,{children:"signature"}),"."]}),"\n",(0,s.jsx)(i.h5,{id:"returns-13",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"VerificationKeyPermission"})}),"\n",(0,s.jsx)(i.h4,{id:"verificationkeyprooforsignature",children:"VerificationKey.proofOrSignature()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"proofOrSignature: () => VerificationKeyPermission;\n"})}),"\n",(0,s.jsx)(i.p,{children:"Modification is permitted by zkapp proofs or signatures"}),"\n",(0,s.jsx)(i.h5,{id:"returns-14",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"VerificationKeyPermission"})}),"\n",(0,s.jsx)(i.h4,{id:"verificationkeysignature",children:"VerificationKey.signature()"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:"signature: () => VerificationKeyPermission;\n"})}),"\n",(0,s.jsx)(i.p,{children:"Modification is permitted by signatures only, using the private key of the zkapp account"}),"\n",(0,s.jsx)(i.h5,{id:"returns-15",children:"Returns"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.code,{children:"VerificationKeyPermission"})})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);
ğŸš€ ZkProgram Compilation Benchmark Suite
=========================================
Testing compilation times for various complexity levels

âœ… Modules loaded successfully

ğŸ”§ Testing Snarky Backend
============================================================
Loading Snarky backend...
âœ“ Snarky backend loaded
âœ… Active backend: snarky

ğŸ¯ Creating Simple Program (Low complexity)

ğŸ“Š Testing Simple Program with Snarky
--------------------------------------------------
â±ï¸  Snarky Simple compile: 20.311s
âœ… Simple compilation successful

ğŸ¯ Creating Gadgets Program (Medium complexity)

ğŸ“Š Testing Gadgets Program with Snarky
--------------------------------------------------
â±ï¸  Snarky Gadgets compile: 22.423s
âœ… Gadgets compilation successful

ğŸ¯ Creating Poseidon Program (Medium-High complexity)

ğŸ“Š Testing Poseidon Program with Snarky
--------------------------------------------------
â±ï¸  Snarky Poseidon compile: 8.229s
âœ… Poseidon compilation successful

ğŸ¯ Creating Recursive Program (High complexity)

ğŸ“Š Testing Recursive Program with Snarky
--------------------------------------------------
â±ï¸  Snarky Recursive compile: 1:06.628 (m:ss.mmm)
âœ… Recursive compilation successful

ğŸ¯ Creating Complex Program (Very High complexity)

ğŸ“Š Testing Complex Program with Snarky
--------------------------------------------------
â±ï¸  Snarky Complex compile: 11.538s
âœ… Complex compilation successful

ğŸ”§ Testing Sparky Backend
============================================================
Switching backend from snarky to sparky
Loading Sparky backend...
[SPARKY] Node.js WASM module loaded (self-initialized)
âœ“ Sparky backend loaded
âœ… Active backend: sparky

ğŸ¯ Creating Simple Program (Low complexity)

ğŸ“Š Testing Simple Program with Sparky
--------------------------------------------------
â±ï¸  Sparky Simple compile: 4.706s
âœ… Simple compilation successful

ğŸ¯ Creating Gadgets Program (Medium complexity)

ğŸ“Š Testing Gadgets Program with Sparky
--------------------------------------------------
âŒ Gadgets compilation failed: Snarky.gates.rotate is not a function

ğŸ¯ Creating Poseidon Program (Medium-High complexity)

ğŸ“Š Testing Poseidon Program with Sparky
--------------------------------------------------
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[1, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 2
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[1, ...]', '[1, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 2
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 2
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[1, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 2
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[1, ...]', '[1, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 2
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 2
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[1, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 3
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]', '[0, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 2
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[1, ...]', '[1, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 2
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
ğŸ” [POSEIDON DEBUG] poseidon.update() called
   State fields count: 3
   Input fields count: 2
   State field types: [ '[0, ...]', '[0, ...]', '[0, ...]' ]
   Input field types: [ '[2, ...]', '[1, ...]' ]
   isConstant(state): true
   isConstant(input): false
ğŸ”¥ [WASM] Using Sparky WASM boundary crossing - VARIABLES DETECTED
   This should be slower due to WASM overhead!
â±ï¸  Sparky Poseidon compile: 6.371s
âœ… Poseidon compilation successful

ğŸ¯ Creating Recursive Program (High complexity)

ğŸ“Š Testing Recursive Program with Sparky
--------------------------------------------------
â±ï¸  Sparky Recursive compile: 16.463s
âœ… Recursive compilation successful

ğŸ¯ Creating Complex Program (Very High complexity)

ğŸ“Š Testing Complex Program with Sparky
--------------------------------------------------
âŒ Complex compilation failed: Snarky.gates.xor is not a function

================================================================================
ğŸ“Š COMPILATION BENCHMARK RESULTS
================================================================================

| Program | Complexity | Snarky Time | Sparky Time | Speedup |
|---------|------------|-------------|-------------|---------|
| Simple  | Low        | 20.31s | 4.71s | 4.32x |
| Gadgets | Medium     | 22.42s      | FAILED      | N/A |
| Poseidon | Medium-High | 8.23s | 6.37s | 1.29x |
| Recursive | High       | 66.63s | 16.46s | 4.05x |
| Complex | Very High  | 11.54s      | FAILED      | N/A |

ğŸ“ˆ Summary Statistics:
   â€¢ Average Speedup: 3.22x
   â€¢ Maximum Speedup: 4.32x
   â€¢ Minimum Speedup: 1.29x
   â€¢ Tests Completed: 3/5

ğŸ‰ Benchmark completed successfully!
